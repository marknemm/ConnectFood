<form [formGroup]="signupForm" (submit)="signup()" *ngIf="!sessionService.loggedIn">
  <div class="row">
    <div class="col-xl-12">
      <mat-card>
        <mat-card-title>Account Type</mat-card-title>
        <mat-card-content>
          <food-web-account-type [editing]="true" formControlName="accountType"></food-web-account-type>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-6">
      <mat-card>
        <mat-card-title>Login Info</mat-card-title>
        <mat-card-content>
          <div class="row">
            <div class="col-sm-12">
              <mat-form-field class="fill">
                <input matInput placeholder="Username" formControlName="username" type="text">
              </mat-form-field>
            </div>
            <div class="col-sm-6">
              <mat-form-field class="fill">
                <input matInput placeholder="Password" formControlName="password" type="password" autocomplete="new-password">
                <mat-error *ngIf="signupForm.get('password').hasError('pattern')">
                  At least 6 characters required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-sm-6">
              <mat-form-field class="fill">
                <input matInput placeholder="Confirm Password" formControlName="confirmPassword" type="password" [errorStateMatcher]="passwordMatchService">
                <mat-error *ngIf="signupForm.hasError('passwordConfirmMatch')">
                  {{ signupForm.getError('passwordConfirmMatch') }}
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-title>Organization Info</mat-card-title>
        <mat-card-content>
          <food-web-organization [editing]="true" formControlName="organization"></food-web-organization>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-xl-6">
      <mat-card>
        <mat-card-title>Contact Info</mat-card-title>
        <mat-card-content>
          <food-web-contact-info [editing]="true" formControlName="contactInfo"></food-web-contact-info>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-title>Hours of Operation</mat-card-title>
        <food-web-operation-hours [editing]="true" formControlName="operationHours"></food-web-operation-hours>
      </mat-card>
    </div>
  </div>

  <div class="row submit-button-container">
    <div class="col-xl-12 align-right">
      <button mat-raised-button color="primary" type="submit" [disabled]="signupForm.invalid">Submit</button>
    </div>
  </div>
</form>

<mat-card *ngIf="sessionService.loggedIn">
  <mat-card-title>Signup Successful</mat-card-title>
  <mat-card-content>
    <p>Welcome to Food Web!</p>
    <p>Please confirm your signup by clicking on the link sent to your email.</p>
  </mat-card-content>
</mat-card>
