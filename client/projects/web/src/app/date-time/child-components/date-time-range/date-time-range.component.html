<div [formGroup]="formGroup" *ngIf="editable | toBoolean; else readonlyDateTimeRange" class="date-time-range-form row">
  <div class="date-time-field col-sm-12">
    <foodweb-date-time
      #startDateTime
      formControlName="startDateTime"
      [allowClear]="allowClear"
      [allowUndefTime]="allowUndefTime"
      [editable]="true"
      [datePlaceholder]="startDatePlaceholder"
      [timePlaceholder]="startTimePlaceholder"
      [minDate]="minDate"
      [maxDate]="maxDate"
      [floatLabels]="floatLabels"
      [errorStateMatcher]="formGroup.rangeErrStateMatcher"
      (ngModelChange)="formGroup.fillMissingRangePart()">
    </foodweb-date-time>
  </div>
  <div class="date-time-field col-sm-12">
    <foodweb-date-time
      #endDateTime
      formControlName="endDateTime"
      [allowClear]="allowClear"
      [allowUndefTime]="allowUndefTime"
      [editable]="true"
      [datePlaceholder]="endDatePlaceholder"
      [timePlaceholder]="endTimePlaceholder"
      [minDate]="minDate"
      [maxDate]="maxDate"
      [floatLabels]="floatLabels"
      [errorStateMatcher]="formGroup.rangeErrStateMatcher"
      (ngModelChange)="formGroup.fillMissingRangePart()">
    </foodweb-date-time>
    <mat-error *ngIf="formGroup.hasError('dateTimeRangeOrder')" class="range-order-err">
      End date-time must be later than start date-time
    </mat-error>
  </div>

  <!-- If configured to show a date time range radio dialog, then include the intercept overlay here for showing dialog. -->
  <div
    *ngIf="dateTimeRangeRadioConfig && this.formGroup.enabled"
    class="date-time-range-radio-intercept"
    (click)="openDateTimeRangeDialog($event)"
  ></div>
</div>

<ng-template #readonlyDateTimeRange>
  <div class="date-time-range-display">
    <foodweb-date-time [boldTime]="boldTime" [excludeTimeDisplay]="startEndDateSame" [value]="value.startDateTime" [editable]="false"></foodweb-date-time>
    <!-- For no display of end date due to same begin and end date, make sure we group times together so they end up on same line if line break occurs. -->
    <span class="d-inline-block">
      <foodweb-date-time *ngIf="startEndDateSame" [boldTime]="boldTime" [excludeDateDisplay]="true" [value]="value.startDateTime" [editable]="false"></foodweb-date-time>
      <span class="display-to"> -- </span>
      <foodweb-date-time [boldTime]="boldTime" [excludeDateDisplay]="startEndDateSame" [value]="value.endDateTime" [editable]="false"></foodweb-date-time>
    </span>
  </div>
</ng-template>
